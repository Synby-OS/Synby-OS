name: synby-os-nvidia-open
description: This is my personal OS image.

base-image: ghcr.io/ublue-os/silverblue-main
image-version: latest

modules:
  - from-file: common/hwe-modules.yml
  - from-file: common/common-modules.yml
  - from-file: common/silverblue-modules.yml
  - from-file: common/nvidia-install.yml

  # sign kernel
  - type: script
    scripts:
      - signkernel.sh
    secrets:
      - type: env
        name: KERNEL_PRIVKEY
        mount:
          type: file
          destination: /tmp/certs/private_key.priv
  - type: secureblue-signing
    source: local

  - type: initramfs
  - type: signing # this sets up the proper policy & signing files for signed images to work fully
